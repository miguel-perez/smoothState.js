!function(t,n,o,e){"use strict";if(!n.history.pushState)return t.fn.smoothState=function(){return this},void(t.fn.smoothState.options={});if(!t.fn.smoothState){var r=t("html, body"),a=n.console||!1,s={anchors:"a",forms:"form",prefetch:!1,blacklist:".no-smoothstate, [target]",development:!1,pageCacheSize:0,alterRequestUrl:function(t){return t},onStart:{duration:0,render:function(){r.scrollTop(0)}},onProgress:{duration:0,render:function(){r.css("cursor","wait"),r.find("a").css("cursor","wait")}},onEnd:{duration:0,render:function(t,n,o){r.css("cursor","auto"),r.find("a").css("cursor","auto"),n.html(o)}},callback:function(){}},i={isExternal:function(t){var o=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof o[1]&&o[1].length>0&&o[1].toLowerCase()!==n.location.protocol?!0:"string"==typeof o[2]&&o[2].length>0&&o[2].replace(new RegExp(":("+{"http:":80,"https:":443}[n.location.protocol]+")?$"),"")!==n.location.host?!0:!1},stripHash:function(t){return t.replace(/#.*/,"")},isHash:function(t,o){o=o||n.location.href;var e=t.indexOf("#")>-1?!0:!1,r=i.stripHash(t)===i.stripHash(o)?!0:!1;return e&&r},shouldLoad:function(t,n){var o=t.prop("href");return!i.isExternal(o)&&!i.isHash(o)&&!t.is(n)},clearIfOverCapacity:function(t,n){return Object.keys||(Object.keys=function(t){var n,o=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.push(n);return o}),Object.keys(t).length>n&&(t={}),t},storePageIn:function(n,e,r,a){var s;return r instanceof HTMLDocument?s=r:(s=o.implementation.createHTMLDocument(""),s.open(),s.write(r),s.close()),n[e]={status:"loaded",title:s.title,html:t(s.getElementById(a))},n},triggerAllAnimationEndEvent:function(n,o){o=" "+o||"";var e=0,r="animationstart webkitAnimationStart oanimationstart MSAnimationStart",a="animationend webkitAnimationEnd oanimationend MSAnimationEnd",s="allanimationend",l=function(o){t(o.delegateTarget).is(n)&&(o.stopPropagation(),e++)},u=function(o){t(o.delegateTarget).is(n)&&(o.stopPropagation(),e--,0===e&&n.trigger(s))};n.on(r,l),n.on(a,u),n.on("allanimationend"+o,function(){e=0,i.redraw(n)})},redraw:function(t){t.height()}},l=function(o){if(null!==o.state){var e=n.location.href,r=t("#"+o.state.id),a=r.data("smoothState");a.href===e||i.isHash(e,a.href)||a.load(e,!1)}},u=function(e,s){var l=t(e),u=l.prop("id"),c=null,d=!1,f={},h=n.location.href,p=function(t){t=t||!1,t&&f.hasOwnProperty(t)?delete f[t]:f={},l.data("smoothState").cache=f},m=function(n,o){o=o||null;var e={dataType:"html",type:"GET"};if(n="string"==typeof n?t.extend({},e,{url:n}):t.extend({},e,n),!f.hasOwnProperty(n.url)||"GET"!==n.type){f=i.clearIfOverCapacity(f,s.pageCacheSize),f[n.url]={status:"fetching"},n.url=s.alterRequestUrl(n.url)||n.url;var r=t.ajax(n);r.success(function(t){i.storePageIn(f,n.url,t,u),l.data("smoothState").cache=f}),r.error(function(){f[n.url].status="error"}),o&&r.complete(o)}},g=function(e){var i="#"+u,h=f[e]?t(f[e].html.html()):null;h?(o.title=f[e].title,l.data("smoothState").href=e,s.onEnd.render(e,l,h,f[e].html),l.one("ss.onEndEnd",function(){if(d=!1,s.callback(e,l,h,f[e].html),c){var n=t(c,l),o=n.offset().top;r.animate({scrollTop:o},250),c=null}}),n.setTimeout(function(){l.trigger("ss.onEndEnd")},s.onEnd.duration)):!h&&s.development&&a?a.warn("No element with an id of "+i+" in response from "+e+" in "+f):n.location=e},v=function(o,e){var r={dataType:"html",type:"GET"};o="string"==typeof o?t.extend({},r,{url:o}):t.extend({},r,o),"undefined"==typeof e&&(e=!0);var i=!1,c=!1,d={loaded:function(){var t=i?"ss.onProgressEnd":"ss.onStartEnd";c&&i?c&&g(o.url):l.one(t,function(){g(o.url)}),e&&n.history.pushState({id:u},f[o.url].title,o.url)},fetching:function(){i||(i=!0,l.one("ss.onStartEnd",function(){s.onProgress.render(o.url,l,null),n.setTimeout(function(){l.trigger("ss.onProgressEnd"),c=!0},s.onProgress.duration)})),n.setTimeout(function(){f.hasOwnProperty(o.url)&&d[f[o.url].status]()},10)},error:function(){s.development&&a?a.log("There was an error loading: "+o.url):n.location=o.url}};f.hasOwnProperty(o.url)||m(o),s.onStart.render(o.url,l,null),n.setTimeout(function(){l.trigger("ss.onStartEnd")},s.onStart.duration),d[f[o.url].status]()},E=function(n){var o=t(n.currentTarget);i.shouldLoad(o,s.blacklist)&&!d&&(n.stopPropagation(),m(o.prop("href")))},S=function(n){var o=t(n.currentTarget),e=o.prop("href");n.metaKey||n.ctrlKey||!i.shouldLoad(o,s.blacklist)||(d=!0,n.stopPropagation(),n.preventDefault(),c=o.prop("hash"),v(e))},y=function(n){n.preventDefault(),n.stopPropagation();var o=t(n.currentTarget),e=o.prop("action"),r=o.prop("method"),a=o.serialize(),s={};"get"===r?s.url=e+"?"+a:(s.url=e,s.data=a,s.type="POST"),d=!0,v(s)},w=function(t){t.on("click",s.anchors,S),t.on("submit",s.forms,y),s.prefetch&&t.on("mouseover touchstart",s.anchors,E)},T=function(t){var o=l.addClass(t).prop("class");l.removeClass(o),n.setTimeout(function(){l.addClass(o)},0),l.one("ss.onStartEnd ss.onProgressEnd ss.onEndEnd",function(){l.removeClass(t)})},P=function(){var t=l.prop("class");l.removeClass(t),i.redraw(l),l.addClass(t)};return s=t.extend({},t.fn.smoothState.options,s),null===n.history.state&&n.history.replaceState({id:u},o.title,h),i.storePageIn(f,h,o.documentElement.outerHTML,u),i.triggerAllAnimationEndEvent(l,"ss.onStartEnd ss.onProgressEnd ss.onEndEnd"),w(l),{href:h,cache:f,clear:p,load:v,fetch:m,toggleAnimationClass:T,restartCSSAnimations:P}},c=function(n){return this.each(function(){this.id&&!t.data(this,"smoothState")?t.data(this,"smoothState",new u(this,n)):!this.id&&a&&a.warn("Every smoothState container needs an id but the following one does not have one:",this)})};n.onpopstate=l,t.smoothStateUtility=i,t.fn.smoothState=c,t.fn.smoothState.options=s}}(jQuery,window,document);